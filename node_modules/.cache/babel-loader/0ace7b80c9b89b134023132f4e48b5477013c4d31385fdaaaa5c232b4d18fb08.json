{"ast":null,"code":"import _slicedToArray from\"E:/priti/whatsapp-ui/telegram-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";export default function useAppLoad(props){var _ref=props!==null&&props!==void 0?props:{},_ref$isProgressStartA=_ref.isProgressStartAutomatically,isProgressStartAutomatically=_ref$isProgressStartA===void 0?true:_ref$isProgressStartA,_ref$progressInterval=_ref.progressInterval,progressInterval=_ref$progressInterval===void 0?500:_ref$progressInterval,_ref$incrementProgres=_ref.incrementProgressValue,incrementProgressValue=_ref$incrementProgres===void 0?10:_ref$incrementProgres,_ref$successLoadedTim=_ref.successLoadedTimeout,successLoadedTimeout=_ref$successLoadedTim===void 0?3000:_ref$successLoadedTim,_ref$stoppedProgressV=_ref.stoppedProgressValue,stoppedProgressValue=_ref$stoppedProgressV===void 0?70:_ref$stoppedProgressV,_ref$isManualProgress=_ref.isManualProgressCompleted,isManualProgressCompleted=_ref$isManualProgress===void 0?true:_ref$isManualProgress;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),progress=_useState2[0],setProgress=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoaded=_useState4[0],setIsLoaded=_useState4[1];useEffect(function(){var interval;if(isProgressStartAutomatically){interval=_initiateProgress();}return function(){if(interval){clearInterval(interval);}};// eslint-disable-next-line\n},[]);useEffect(function(){var timeout;if(progress>=stoppedProgressValue&&isManualProgressCompleted){timeout=setTimeout(function(){setIsLoaded(true);setProgress(100);},successLoadedTimeout);}return function(){if(timeout){clearTimeout(timeout);}};},[progress,stoppedProgressValue,isManualProgressCompleted,successLoadedTimeout]);var _initiateProgress=function _initiateProgress(){var interval=setInterval(function(){setProgress(function(prev){if(prev>=stoppedProgressValue){clearInterval(interval);}return prev+incrementProgressValue;});},progressInterval);return interval;};var start=function start(){_initiateProgress();};var done=function done(){if(!isManualProgressCompleted){setIsLoaded(true);}};return{progress:progress,isLoaded:isLoaded,start:start,done:done};}","map":{"version":3,"names":["useState","useEffect","useAppLoad","props","isProgressStartAutomatically","progressInterval","incrementProgressValue","successLoadedTimeout","stoppedProgressValue","isManualProgressCompleted","progress","setProgress","isLoaded","setIsLoaded","interval","_initiateProgress","clearInterval","timeout","setTimeout","clearTimeout","setInterval","prev","start","done"],"sources":["E:/priti/whatsapp-ui/telegram-ui/src/common/hooks/useAppLoad.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\ntype AppLoadProps = {\r\n  isProgressStartAutomatically?: boolean;\r\n  incrementProgressValue?: number;\r\n  /**\r\n   * setIntervalue value i.e. to update the progress value after each interval\r\n   */\r\n  progressInterval?: number;\r\n  /**\r\n   * after progressInterval stopped, how many seconds we should wait to complete the progress\r\n   */\r\n  successLoadedTimeout?: number;\r\n  /**\r\n   * At which progress value we want to stop the progress\r\n   */\r\n  stoppedProgressValue?: number;\r\n  /**\r\n   * if true then it will automatically complete the progress after 'successLoadedTimeout'\r\n   * otherwise we have to manually call done()\r\n   */\r\n  isManualProgressCompleted?: boolean;\r\n};\r\n\r\nexport default function useAppLoad(props?: AppLoadProps) {\r\n  const {\r\n    isProgressStartAutomatically = true,\r\n    progressInterval = 500,\r\n    incrementProgressValue = 10,\r\n    successLoadedTimeout = 3000,\r\n    stoppedProgressValue = 70,\r\n    isManualProgressCompleted = true,\r\n  } = props ?? {};\r\n\r\n  const [progress, setProgress] = useState(0);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let interval: any;\r\n    if (isProgressStartAutomatically) {\r\n      interval = _initiateProgress();\r\n    }\r\n\r\n    return () => {\r\n      if (interval) {\r\n        clearInterval(interval);\r\n      }\r\n    };\r\n\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let timeout: any;\r\n    if (progress >= stoppedProgressValue && isManualProgressCompleted) {\r\n      timeout = setTimeout(() => {\r\n        setIsLoaded(true);\r\n        setProgress(100);\r\n      }, successLoadedTimeout);\r\n    }\r\n\r\n    return () => {\r\n      if (timeout) {\r\n        clearTimeout(timeout);\r\n      }\r\n    };\r\n  }, [progress, stoppedProgressValue, isManualProgressCompleted, successLoadedTimeout]);\r\n\r\n  const _initiateProgress = () => {\r\n    const interval = setInterval(() => {\r\n      setProgress((prev) => {\r\n        if (prev >= stoppedProgressValue) {\r\n          clearInterval(interval);\r\n        }\r\n\r\n        return prev + incrementProgressValue;\r\n      });\r\n    }, progressInterval);\r\n\r\n    return interval;\r\n  };\r\n\r\n  const start = () => {\r\n    _initiateProgress();\r\n  };\r\n\r\n  const done = () => {\r\n    if (!isManualProgressCompleted) {\r\n      setIsLoaded(true);\r\n    }\r\n  };\r\n\r\n  return { progress, isLoaded, start, done };\r\n}\r\n"],"mappings":"sHAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAwB3C,cAAe,SAASC,WAAU,CAACC,KAAoB,CAAE,CACvD,SAOIA,KAAK,SAALA,KAAK,UAALA,KAAK,CAAI,CAAC,CAAC,4BANbC,4BAA4B,CAA5BA,4BAA4B,gCAAG,IAAI,kDACnCC,gBAAgB,CAAhBA,gBAAgB,gCAAG,GAAG,kDACtBC,sBAAsB,CAAtBA,sBAAsB,gCAAG,EAAE,kDAC3BC,oBAAoB,CAApBA,oBAAoB,gCAAG,IAAI,kDAC3BC,oBAAoB,CAApBA,oBAAoB,gCAAG,EAAE,kDACzBC,yBAAyB,CAAzBA,yBAAyB,gCAAG,IAAI,uBAGlC,cAAgCT,QAAQ,CAAC,CAAC,CAAC,wCAApCU,QAAQ,eAAEC,WAAW,eAC5B,eAAgCX,QAAQ,CAAC,KAAK,CAAC,yCAAxCY,QAAQ,eAAEC,WAAW,eAE5BZ,SAAS,CAAC,UAAM,CACd,GAAIa,SAAa,CACjB,GAAIV,4BAA4B,CAAE,CAChCU,QAAQ,CAAGC,iBAAiB,EAAE,CAChC,CAEA,MAAO,WAAM,CACX,GAAID,QAAQ,CAAE,CACZE,aAAa,CAACF,QAAQ,CAAC,CACzB,CACF,CAAC,CAED;AACF,CAAC,CAAE,EAAE,CAAC,CAENb,SAAS,CAAC,UAAM,CACd,GAAIgB,QAAY,CAChB,GAAIP,QAAQ,EAAIF,oBAAoB,EAAIC,yBAAyB,CAAE,CACjEQ,OAAO,CAAGC,UAAU,CAAC,UAAM,CACzBL,WAAW,CAAC,IAAI,CAAC,CACjBF,WAAW,CAAC,GAAG,CAAC,CAClB,CAAC,CAAEJ,oBAAoB,CAAC,CAC1B,CAEA,MAAO,WAAM,CACX,GAAIU,OAAO,CAAE,CACXE,YAAY,CAACF,OAAO,CAAC,CACvB,CACF,CAAC,CACH,CAAC,CAAE,CAACP,QAAQ,CAAEF,oBAAoB,CAAEC,yBAAyB,CAAEF,oBAAoB,CAAC,CAAC,CAErF,GAAMQ,kBAAiB,CAAG,QAApBA,kBAAiB,EAAS,CAC9B,GAAMD,SAAQ,CAAGM,WAAW,CAAC,UAAM,CACjCT,WAAW,CAAC,SAACU,IAAI,CAAK,CACpB,GAAIA,IAAI,EAAIb,oBAAoB,CAAE,CAChCQ,aAAa,CAACF,QAAQ,CAAC,CACzB,CAEA,MAAOO,KAAI,CAAGf,sBAAsB,CACtC,CAAC,CAAC,CACJ,CAAC,CAAED,gBAAgB,CAAC,CAEpB,MAAOS,SAAQ,CACjB,CAAC,CAED,GAAMQ,MAAK,CAAG,QAARA,MAAK,EAAS,CAClBP,iBAAiB,EAAE,CACrB,CAAC,CAED,GAAMQ,KAAI,CAAG,QAAPA,KAAI,EAAS,CACjB,GAAI,CAACd,yBAAyB,CAAE,CAC9BI,WAAW,CAAC,IAAI,CAAC,CACnB,CACF,CAAC,CAED,MAAO,CAAEH,QAAQ,CAARA,QAAQ,CAAEE,QAAQ,CAARA,QAAQ,CAAEU,KAAK,CAALA,KAAK,CAAEC,IAAI,CAAJA,IAAK,CAAC,CAC5C"},"metadata":{},"sourceType":"module","externalDependencies":[]}